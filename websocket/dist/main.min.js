function getById(e){return document.getElementById(e)}function getByTag(e,t){return e.getElementsByTagName(t)}function getStyle(e,t){return e.currentStyle?e.currentStyle[t]:getComputedStyle(e)[t]}function doMove(e,t,n,o,r){clearInterval(e.doMove_timer),n=o>parseInt(getStyle(e,t))?n:-n;var a=0;e.doMove_timer=setInterval(function(){a=parseInt(getStyle(e,t))+n,(o<a&&0<n||a<o&&n<0)&&(a=o),e.style[t]=a+"px",a==o&&(clearInterval(e.doMove_timer),r&&r())},30)}function doShake(e,t,n){var o=[];e.oldState||(e.oldState=parseInt(getStyle(e,t)));for(var r=0,a=n;0<a;a-=2)o.push(a,-a);o.push(0),clearInterval(e.shake_timer),e.shake_timer=setInterval(function(){e.style[t]=e.oldState+o[r]+"px",++r>o.length-1&&clearInterval(e.shake_timer)},60)}function doOpacity(e,t,n,o){t=parseInt(100*getStyle(e,"opacity"))<n?t:-t,clearInterval(e.opacity_timer);var r=0;e.opacity_timer=setInterval(function(){r=parseInt(100*getStyle(e,"opacity"))+t,(n<r&&0<t||r<n&&t<0)&&(r=n),e.style.opacity=r/100,r==n&&(clearInterval(e.opacity_timer),o&&o())},100)}function getPos(e){for(var t={left:0,top:0};e;)t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.offsetParent;return t}function getByClass(e,t,n){for(var o=e.getElementsByTagName(t),r=[],a=0;a<o.length;a++)-1!=searchArr(o[a].className.split(" "),n)&&r.push(o[a]);return r}function addClass(e,t){""==e.className?e.className=t:-1==searchArr(e.className.split(" "),t)&&(e.className+=" "+t)}function removeClass(e,t){if(e.className){var n=e.className.split(" "),o=searchArr(n,t);-1!=o&&(n.splice(o,1),e.className=n.join(" "))}}function searchArr(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function getScrollDis(){var e={};return e.top=document.documentElement.scrollTop||document.body.scrollTop,e.left=document.documentElement.scrollLeft||document.body.scrollLeft,e}function bind(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){n.call(e)})}function unbind(e,t,n){e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function getClientSize(){var e={};return e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e}function drag(o){o.onmousedown=function(e){var t=(e=e||event).clientX-o.offsetLeft,n=e.clientY-o.offsetTop;return o.setCapture&&o.setCapture(),document.onmousemove=function(e){e=e||event;o.style.left=e.clientX-t+"px",o.style.top=e.clientY-n+"px"},!(document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,o.releaseCapture&&o.releaseCapture()})}}function setCookie(e,t,n){var o=new Date;o.setDate(o.getDate()+n),document.cookie=e+"="+encodeURIComponent(t)+";expires="+o.toUTCString()}function getCookie(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e)return decodeURIComponent(o[1])}}function removeCookie(e){setCookie(e,"",-1)}function cirAnimation(e,a,t,n,o){var l=document.getElementById(e),r=l.getContext("2d"),c=[];setInterval(function(){var e=Math.floor(Math.random()*l.width),t=Math.floor(Math.random()*l.height),n=Math.floor(256*Math.random()),o=Math.floor(256*Math.random()),r=Math.floor(256*Math.random());c.push({x:e,y:t,r:a,R:n,G:o,B:r,A:1})},t),setInterval(function(){r.clearRect(0,0,l.width,l.height);for(var e=0;e<c.length;e++)r.beginPath(),r.fillStyle="rgba("+c[e].R+","+c[e].G+","+c[e].B+","+c[e].A+")",r.moveTo(c[e].x,c[e].y),r.arc(c[e].x,c[e].y,c[e].r,0,2*Math.PI,!1),r.closePath(),r.fill();for(e=0;e<c.length;e++)c[e].r+=n,c[e].A-=o,c[e].A<=0&&c.splice(e,1)},1e3/60)}function copy(e){var t={};for(var n in e)t[n]=e[n];return t}function deepCopy(e){if("object"!=typeof e)return e;var t={};for(var n in e)t[n]=deepCopy(e[n]);return t}function randNum(e,t){for(var n=[],o=[],r=1;r<=e;r++)n.push(r);for(r=0;r<t;r++)o.push(n.splice(Math.floor(Math.random()*n.length),1));return o}function selectText(){return document.selection?document.selection.createRange().text:window.getSelection().toString()}function ajax(e,t,n,o){try{var r=new XMLHttpRequest}catch(e){r=new ActiveXObject("Microsoft.XMLHTTP")}r.onreadystatechange=function(){4==r.readyState&&200==r.status&&o(r.responseText)},"get"===e.toLowerCase()?(r.open("get",t+"?"+n,!0),r.send()):(r.open("post",t,!0),r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r.send(n))}function linearMoveFn(o,r,a,l){clearInterval(o.timer);var c={};o.timer=setInterval(function(){var e=!0;for(var t in r){if("opacity"==t){if(Math.round(100*getStyle(o,t))!=100*r[t]){e=!1,null==c[t]&&(c[t]=Math.round(100*getStyle(o,t)),a=100*r[t]>c[t]?a:-1*a);var n=Math.round(100*getStyle(o,t));o.style[t]=(n+a)/100,o.style.filter="alpha("+(n+a)+")"}}else parseInt(getStyle(o,t))!=r[t]&&(e=!1,null==c[t]&&(c[t]=parseInt(getStyle(o,t)),a=r[t]>c[t]?a:-1*a),o.style[t]=parseInt(getStyle(o,t))+a+"px");e&&(clearInterval(o.timer),l&&l.call(o))}},30)}function easeMoveFn(a,l,c){clearInterval(a.timer),a.timer=setInterval(function(){var e=!0;for(var t in l){if("opacity"==t){if(Math.round(100*getStyle(a,t))!=100*l[t]){e=!1;var n=Math.round(100*getStyle(a,t)),o=100*l[t]>n?Math.ceil((100*l[t]-n)/8):Math.floor((100*l[t]-n)/8);a.style[t]=(n+o)/100,a.style.filter="alpha("+(n+o)+")"}}else if(parseInt(getStyle(a,t))!=l[t]){e=!1;var r=parseInt(getStyle(a,t));o=l[t]>r?Math.ceil((l[t]-r)/8):Math.floor((l[t]-r)/8);a.style[t]=r+o+"px"}e&&(clearInterval(a.timer),c&&c.call(a))}},30)}var http=require("http"),fs=require("fs"),docRoot="C:/Users/qyj/Desktop/jsexcise/websocket",httpServer=http.createServer(function(e,n){fs.readFile(docRoot+e.url,function(e,t){e?(n.writeHeader(404,{"content-type":"text/html;charset=utf-8"}),n.end("你请求的页面不存在！")):(n.writeHeader(200,{"content-type":"text/html;charset=utf-8"}),n.end(t)),console.log("有人访问了nodejs服务器")})}).listen(8080);console.log("http服务器已经运行在8080端口");var io=require("socket.io")(httpServer);io.on("connection",function(t){console.log("有人连接了socket"),t.emit("welcome","欢迎您访问！"),t.on("intro",function(e){t.broadcast.emit("otherintro",e)})});